# MiniCRM — Admin Console (admin.html)

Этот архив содержит готовую админ‑страницу **admin.html** и инструкцию по установке.

## 1) Куда положить
- Репозиторий GitHub Pages с клиентом (там, где `index.html`), например: `/CRM1/`
- Скопируйте `admin.html` в эту же папку.
- Итоговая ссылка: `https://<ваш_логин>.github.io/CRM1/admin.html`

## 2) Что заполнить при первом открытии
Откройте `admin.html` и введите:
- **API_BASE** — URL вашего Google Apps Script Web App (`.../exec`)
- **ADMIN_API_KEY** — ключ из `Config.gs` на сервере (GAS)

Нажмите **Сохранить настройки** → **Загрузить список**.

## 3) Что можно делать в консоли
- Смотреть весь список клиентов: login, tid, дата окончания, остаток дней, устройства/лимит, роль.
- **Активировать доступ**: +30 / +90 дней или до конкретной даты (попросит `deviceId` клиента).
- Генерировать **ссылку на оплату ЮMoney** (receiver, сумма, tid, device) → открыть/скопировать.

## 4) Минимальная серверная часть (GAS)
Убедитесь, что в вашем GAS есть маршруты:
- `POST /admin/listUsers` (требует `ADMIN_API_KEY`) — возвращает список клиентов
- `POST /activate` — активирует по паре (tid, device) до даты `YYYY-MM-DD`

Права развертывания Web App: **Execute as: Me**, **Who has access: Anyone**.

## 5) Безопасность
- `ADMIN_API_KEY` вводится только на этой странице вручную и не шьется в код клиента.
- Клиентская `index.html` не содержит админ‑логики.
- GAS обязательно проверяет ключ на админ‑маршрутах.

## 6) Быстрый тест
1. Введите API_BASE и ключ → **Загрузить список**.
2. Выберите клиента → **+30 дней** → вставьте его `deviceId`.
3. На стороне клиента нажмите **Проверить оплату** — срок продлится.

--
Собрано: 2025-11-04
